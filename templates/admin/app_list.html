{% load i18n %}

{% if app_list %}
  {% for app in app_list %}
    <div class="app-{{ app.app_label }} module">
      <table>
        <caption>
          <a href="{{ app.app_url }}" class="section" title="{% blocktrans with name=app.name %}Models in the {{ name }} application{% endblocktrans %}">{{ app.name }}</a>
        </caption>
        
        {# Lógica especial para reordenar la app GESTION #}
        {% if app.app_label == 'gestion' %}
          {% for model in app.models %}{% if model.object_name == 'CategoriaServicio' %}<tr class="model-{{ model.object_name|lower }}">{% if model.admin_url %}<th scope="row"><a href="{{ model.admin_url }}">{{ model.name }}</a></th>{% else %}<th scope="row">{{ model.name }}</th>{% endif %}{% if model.add_url %}<td><a href="{{ model.add_url }}" class="addlink">{% trans 'Add' %}</a></td>{% else %}<td>&nbsp;</td>{% endif %}{% if model.admin_url %}<td><a href="{{ model.admin_url }}" class="changelink">{% trans 'Change' %}</a></td>{% else %}<td>&nbsp;</td>{% endif %}</tr>{% endif %}{% endfor %}
          {% for model in app.models %}{% if model.object_name == 'SubServicio' %}<tr class="model-{{ model.object_name|lower }}">{% if model.admin_url %}<th scope="row"><a href="{{ model.admin_url }}">{{ model.name }}</a></th>{% else %}<th scope="row">{{ model.name }}</th>{% endif %}{% if model.add_url %}<td><a href="{{ model.add_url }}" class="addlink">{% trans 'Add' %}</a></td>{% else %}<td>&nbsp;</td>{% endif %}{% if model.admin_url %}<td><a href="{{ model.admin_url }}" class="changelink">{% trans 'Change' %}</a></td>{% else %}<td>&nbsp;</td>{% endif %}</tr>{% endif %}{% endfor %}
          {% for model in app.models %}{% if model.object_name == 'Proveedor' %}<tr class="model-{{ model.object_name|lower }}">{% if model.admin_url %}<th scope="row"><a href="{{ model.admin_url }}">{{ model.name }}</a></th>{% else %}<th scope="row">{{ model.name }}</th>{% endif %}{% if model.add_url %}<td><a href="{{ model.add_url }}" class="addlink">{% trans 'Add' %}</a></td>{% else %}<td>&nbsp;</td>{% endif %}{% if model.admin_url %}<td><a href="{{ model.admin_url }}" class="changelink">{% trans 'Change' %}</a></td>{% else %}<td>&nbsp;</td>{% endif %}</tr>{% endif %}{% endfor %}
          {% for model in app.models %}{% if model.object_name == 'PuntoAtencion' %}<tr class="model-{{ model.object_name|lower }}">{% if model.admin_url %}<th scope="row"><a href="{{ model.admin_url }}">{{ model.name }}</a></th>{% else %}<th scope="row">{{ model.name }}</th>{% endif %}{% if model.add_url %}<td><a href="{{ model.add_url }}" class="addlink">{% trans 'Add' %}</a></td>{% else %}<td>&nbsp;</td>{% endif %}{% if model.admin_url %}<td><a href="{{ model.admin_url }}" class="changelink">{% trans 'Change' %}</a></td>{% else %}<td>&nbsp;</td>{% endif %}</tr>{% endif %}{% endfor %}
          {% for model in app.models %}{% if model.object_name == 'BaremoProveedor' %}<tr class="model-{{ model.object_name|lower }}">{% if model.admin_url %}<th scope="row"><a href="{{ model.admin_url }}">{{ model.name }}</a></th>{% else %}<th scope="row">{{ model.name }}</th>{% endif %}{% if model.add_url %}<td><a href="{{ model.add_url }}" class="addlink">{% trans 'Add' %}</a></td>{% else %}<td>&nbsp;</td>{% endif %}{% if model.admin_url %}<td><a href="{{ model.admin_url }}" class="changelink">{% trans 'Change' %}</a></td>{% else %}<td>&nbsp;</td>{% endif %}</tr>{% endif %}{% endfor %}
          {% for model in app.models %}{% if model.object_name == 'Plan' %}<tr class="model-{{ model.object_name|lower }}">{% if model.admin_url %}<th scope="row"><a href="{{ model.admin_url }}">{{ model.name }}</a></th>{% else %}<th scope="row">{{ model.name }}</th>{% endif %}{% if model.add_url %}<td><a href="{{ model.add_url }}" class="addlink">{% trans 'Add' %}</a></td>{% else %}<td>&nbsp;</td>{% endif %}{% if model.admin_url %}<td><a href="{{ model.admin_url }}" class="changelink">{% trans 'Change' %}</a></td>{% else %}<td>&nbsp;</td>{% endif %}</tr>{% endif %}{% endfor %}
          {% for model in app.models %}{% if model.object_name == 'Cliente' %}<tr class="model-{{ model.object_name|lower }}">{% if model.admin_url %}<th scope="row"><a href="{{ model.admin_url }}">{{ model.name }}</a></th>{% else %}<th scope="row">{{ model.name }}</th>{% endif %}{% if model.add_url %}<td><a href="{{ model.add_url }}" class="addlink">{% trans 'Add' %}</a></td>{% else %}<td>&nbsp;</td>{% endif %}{% if model.admin_url %}<td><a href="{{ model.admin_url }}" class="changelink">{% trans 'Change' %}</a></td>{% else %}<td>&nbsp;</td>{% endif %}</tr>{% endif %}{% endfor %}
          {% for model in app.models %}{% if model.object_name == 'Contrato' %}<tr class="model-{{ model.object_name|lower }}">{% if model.admin_url %}<th scope="row"><a href="{{ model.admin_url }}">{{ model.name }}</a></th>{% else %}<th scope="row">{{ model.name }}</th>{% endif %}{% if model.add_url %}<td><a href="{{ model.add_url }}" class="addlink">{% trans 'Add' %}</a></td>{% else %}<td>&nbsp;</td>{% endif %}{% if model.admin_url %}<td><a href="{{ model.admin_url }}" class="changelink">{% trans 'Change' %}</a></td>{% else %}<td>&nbsp;</td>{% endif %}</tr>{% endif %}{% endfor %}
          {% for model in app.models %}{% if model.object_name == 'Asegurado' %}<tr class="model-{{ model.object_name|lower }}">{% if model.admin_url %}<th scope="row"><a href="{{ model.admin_url }}">{{ model.name }}</a></th>{% else %}<th scope="row">{{ model.name }}</th>{% endif %}{% if model.add_url %}<td><a href="{{ model.add_url }}" class="addlink">{% trans 'Add' %}</a></td>{% else %}<td>&nbsp;</td>{% endif %}{% if model.admin_url %}<td><a href="{{ model.admin_url }}" class="changelink">{% trans 'Change' %}</a></td>{% else %}<td>&nbsp;</td>{% endif %}</tr>{% endif %}{% endfor %}
        
        {# Lógica normal para el resto de las apps #}
        {% else %}
          {% for model in app.models %}
            <tr class="model-{{ model.object_name|lower }}">
            {% if model.admin_url %}
              <th scope="row"><a href="{{ model.admin_url }}">{{ model.name }}</a></th>
            {% else %}
              <th scope="row">{{ model.name }}</th>
            {% endif %}

            {% if model.add_url %}
              <td><a href="{{ model.add_url }}" class="addlink">{% trans 'Add' %}</a></td>
            {% else %}
              <td>&nbsp;</td>
            {% endif %}

            {% if model.admin_url %}
              <td><a href="{{ model.admin_url }}" class="changelink">{% trans 'Change' %}</a></td>
            {% else %}
              <td>&nbsp;</td>
            {% endif %}
            </tr>
          {% endfor %}
        {% endif %}

      </table>
    </div>
  {% endfor %}
{% else %}
  <p>{% trans "You don't have permission to view or edit anything." %}</p>
{% endif %}